#!/usr/bin/env python3
"""
–ü—Ä–æ–µ–∫—Ç 5: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∏—Å—Ç–µ–º —Å—á–∏—Å–ª–µ–Ω–∏—è
"""
# 1. –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –¥–µ—Å—è—Ç–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É
def to_decimal(number_str, base):
    """
    –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —á–∏—Å–ª–æ –∏–∑ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å—á–∏—Å–ª–µ–Ω–∏—è –≤ –¥–µ—Å—è—Ç–∏—á–Ω—É—é
    
    :param number_str(str): —á–∏—Å–ª–æ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ 
    :param base(int): –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å—á–∏—Å–ª–µ–Ω–∏—è (2-16)    

    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    int: —á–∏—Å–ª–æ –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
    """
    # –ê–ª—Ñ–∞–≤–∏—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º —Å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º –¥–æ 16
    digits = '0123456789ABCDEF'         

    number_str = number_str.upper()     # –ø–µ—Ä–µ–≤–æ–¥–∏–º —Å–∏–º–≤–æ–ª—ã –≤ –≤–µ—Ä—Ö–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä

    result = 0
    power = 1                           # —ç—Ç–æ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤ —Å—Ç–µ–ø–µ–Ω–∏ –ø–æ–∑–∏—Ü–∏–∏ (–Ω–∞—á–∏–Ω–∞–µ–º —Å base‚Å∞ = 1)

    # –∏–¥–µ–º –ø–æ —á–∏—Å–ª—É —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º reversed()
    for digit in reversed(number_str):
        # –Ω–∞—Ö–æ–¥–∏–º —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞ –≤ –ê–ª—Ñ–∞–≤–∏—Ç–µ digits
        digit_value = digits.index(digit)
        # –¥–æ–±–∞–≤–ª—è–µ–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
        result += digit_value * power
        # —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—Ç–µ–ø–µ–Ω—å –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞–∑—Ä—è–¥–∞
        power *= base

    return result
    

""" 
üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ to_decimal():
reversed() ‚Äî –∏–¥—ë–º –æ—Ç –º–ª–∞–¥—à–∏—Ö —Ä–∞–∑—Ä—è–¥–æ–≤ –∫ —Å—Ç–∞—Ä—à–∏–º
power ‚Äî –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç —Å—Ç–µ–ø–µ–Ω—å –æ—Å–Ω–æ–≤–∞–Ω–∏—è (–∫ –ø—Ä–∏–º–µ—Ä—É –¥–ª—è –æ—Å–Ω–æ–≤–∞–Ω–∏—è '2' - 2‚Å∞, 2¬π, 2¬≤...)  
digits.index(digit) ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å–∏–º–≤–æ–ª –≤ —á–∏—Å–ª–æ (A=10, B=11 –∏ —Ç.–¥.)
–ê–ª–≥–æ—Ä–∏—Ç–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±–æ–π —Å–∏—Å—Ç–µ–º—ã 2-16
"""

# 2. –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞ –∏–∑ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
def from_decimal(number, base):
    """
    –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —á–∏—Å–ª–æ –∏–∑ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—É—é.
    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
    number (int): —á–∏—Å–ª–æ –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
    base (int): –æ—Å–Ω–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (2-16)
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    str: —á–∏—Å–ª–æ –≤ —Ü–µ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ    
    """
    # –ê–ª—Ñ–∞–≤–∏—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º —Å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º –¥–æ 16
    digits = '0123456789ABCDEF'    

    if number == 0:
        return '0'
    
    result = ''             # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

    while number > 0:
        # –ë–µ—Ä—ë–º –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è - —ç—Ç–æ —Ü–∏—Ñ—Ä–∞ –≤ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
        remainder = number % base
        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ—Å—Ç–∞—Ç–æ–∫ –≤ —Å–∏–º–≤–æ–ª
        result = digits[remainder] + result         #digits[remainder] —ç—Ç–æ —Å–∏–º–≤–æ–ª –≤ –ê–ª—Ñ–∞–≤–∏—Ç–µ digits
        # –î–µ–ª–∏–º —á–∏—Å–ª–æ –Ω–∞—Ü–µ–ª–æ
        number = number // base
    
    return result
        
"""
üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ from_decimal():
number % base ‚Äî –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è (—Ü–∏—Ñ—Ä–∞ –≤ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ)
digits[remainder] ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —á–∏—Å–ª–æ –≤ —Å–∏–º–≤–æ–ª (0-9, A-F)
result = digits[remainder] + result ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º —Ü–∏—Ñ—Ä—É —Å–ª–µ–≤–∞ (–æ–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫!)
number = number // base ‚Äî —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ–µ –¥–µ–ª–µ–Ω–∏–µ
"""

# 3. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
def convert_number(number_str, from_base, to_base):
    """
    –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏ —Å—á–∏—Å–ª–µ–Ω–∏—è.
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–∞–Ω–∏—è
    if not (2 <= from_base <= 16) or not (2 <= to_base <= 16):
        raise ValueError("–û—Å–Ω–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç 2 –¥–æ 16")
    
    # –ü–µ—Ä–µ–≤–æ–¥–∏–º –≤ –¥–µ—Å—è—Ç–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É
    decimal_value = to_decimal(number_str, from_base)
    
    # –ü–µ—Ä–µ–≤–æ–¥–∏–º –∏–∑ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π –≤ —Ü–µ–ª–µ–≤—É—é
    result = from_decimal(decimal_value, to_base)
    
    return result


# 4. –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
def main():
    print("=== –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∏—Å—Ç–µ–º —Å—á–∏—Å–ª–µ–Ω–∏—è ===")
    print("–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —á–∏—Å–ª–∞ –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏ —Å—á–∏—Å–ª–µ–Ω–∏—è (2-16)")
    print("–ü—Ä–∏–º–µ—Ä –≤–≤–æ–¥–∞: FF 16 2")
    print()
    
    try:
        # –ü–æ–ª—É—á–∞–µ–º –≤–≤–æ–¥ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user_input = input("–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ, –∏—Å—Ö–æ–¥–Ω–æ–µ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∏ —Ü–µ–ª–µ–≤–æ–µ –æ—Å–Ω–æ–≤–∞–Ω–∏–µ: ")
        
        # –†–∞–∑–±–∏–≤–∞–µ–º –≤–≤–æ–¥ –Ω–∞ —á–∞—Å—Ç–∏
        parts = user_input.split()
        
        if len(parts) != 3:
            print("–û—à–∏–±–∫–∞: –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª")
            return
        
        number_str = parts[0].upper()
        from_base = int(parts[1])
        to_base = int(parts[2])
        
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º
        result = convert_number(number_str, from_base, to_base)
        
        # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        print("\n" + "="*40)
        print(f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {result}")
        print("="*40)
        
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        decimal_value = to_decimal(number_str, from_base)
        print(f"\n–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:")
        print(f"–í –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ: {decimal_value}")
        print(f"–í –¥–≤–æ–∏—á–Ω–æ–π: {from_decimal(decimal_value, 2)}")
        print(f"–í –≤–æ—Å—å–º–µ—Ä–∏—á–Ω–æ–π: {from_decimal(decimal_value, 8)}")
        print(f"–í —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–π: {from_decimal(decimal_value, 16)}")
        
    except ValueError as e:
        print(f"–û—à–∏–±–∫–∞: {e}")
    except Exception as e:
        print(f"–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")


#5 –¢–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã 
def run_tests():
    """–§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    test_cases = [
        ("1010", 2, 10, "10"),      # 1010‚ÇÇ ‚Üí 10‚ÇÅ‚ÇÄ
        ("255", 10, 16, "FF"),      # 255‚ÇÅ‚ÇÄ ‚Üí FF‚ÇÅ‚ÇÜ
        ("FF", 16, 2, "11111111"),  # FF‚ÇÅ‚ÇÜ ‚Üí 11111111‚ÇÇ
        ("777", 8, 10, "511"),      # 777‚Çà ‚Üí 511‚ÇÅ‚ÇÄ
        ("A1B", 16, 8, "5033"),     # A1B‚ÇÅ‚ÇÜ ‚Üí 5033‚Çà
    ]
    
    print("–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤...")
    for number, from_base, to_base, expected in test_cases:
        result = convert_number(number, from_base, to_base)
        status = "‚úÖ" if result == expected else "‚ùå"
        print(f"{status} {number}_{from_base} ‚Üí {result}_{to_base} (–æ–∂–∏–¥–∞–ª–æ—Å—å: {expected})")

